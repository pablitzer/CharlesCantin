# Local deployement:

- prerequesite : git and node.js installed

- instructions :
  - clone locally this git repository
  - choose the woking branch or create dev branch
    - main branch contains initial developpement
    - production branch contains last user modifications
  - get all dependancies :
    - execute command : npm install
  - run locally :
    - create thumbnails image : npm run build:prod
    - open a terminal and execute command : npm run run:localproxy
    - open a terminal and execute command : npm run run:local
    - open the site at address http://localhost:8082
    - The cms admin pages can be accessed at http://localhost:8082/admin

# production deployement:

- requirement : this site is designed to work with netlify hosting provider (use of form management capabilities)
- configure the netlify site:

  - get content from this repository in github
  - site deploiement must be triggered by "production" branch changes
  - configure deploy command : npm run deploy:prod
  - the site root folder is /\_site.

- publishing content in Admin pages will automatically push update to the github repository that will trigger a new site deployment making the changes available.
- Admin pages access ( <site url>/admin ) is restricted to authorized users. Admin users must be declared in netlify site management (go to identity tab, click on invite user)

# project structure

- \_deploy : javascript use at deployment time (create thumbnails images)
- \_filter : custom filter for nunjucks template language
- \_includes : nunjucks templates and layout
- \_sass : stylesheets using sass language
- \_site : the generated site. it does not contain source files
- admin : netfily CMS configuration
- configuration : site customization created by netfily CMS
- design XD : adobe XD prototypes of the site
- fonts : site fonts source
- images : images from netlify CMS media management
- javascripts : jvascripts used by site pages.
- stylessheets : css files generated by sass or background.njk
- eleventy.js : eleventy configuration
- backgroung.njk : template for generating css style for background images (css dynamically generated from netlify CMS site customization).
- others .njk : nunjucks main templates for the site pages.
